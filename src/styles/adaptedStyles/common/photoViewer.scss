.bewly-design {
  .pswp {
    --bew-pswp-horizontal-gap: clamp(24px, 6vw, 96px);
    --bew-pswp-vertical-gap: clamp(24px, 12vh, 140px);
  }

  .pswp__bg {
    background-color: rgba(0, 0, 0, 0.85) !important;
  }

  .pswp__item {
    align-items: center !important;
    display: flex !important;
    justify-content: center !important;
    padding: var(--bew-pswp-vertical-gap) var(--bew-pswp-horizontal-gap);
    box-sizing: border-box;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
  }

  // Strong override for all pswp elements
  .pswp__zoom-wrap {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    position: static !important;
    width: auto !important;
    height: auto !important;
    transform: none !important;

    // Use CSS animation to continuously reset transform
    animation: resetTransform 0s infinite;
  }

  @keyframes resetTransform {
    to {
      transform: none !important;
    }
  }

  .pswp__img {
    max-width: calc(100vw - var(--bew-pswp-horizontal-gap) * 2) !important;
    max-height: calc(100vh - var(--bew-pswp-vertical-gap) * 2) !important;
    width: auto !important;
    height: auto !important;
    object-fit: contain;
    border-radius: 12px;
    box-shadow: 0 24px 64px rgba(0, 0, 0, 0.5);
    background-color: #000;
    position: static !important;
    top: auto !important;
    left: auto !important;
    right: auto !important;
    bottom: auto !important;
    transform: none !important;
    animation: resetTransform 0s infinite;
  }

  .pswp.bewly-pswp-adapted {
    .pswp__top-bar {
      background: none !important;
      box-shadow: none !important;
      pointer-events: none;
      position: relative !important;
      z-index: 1;
    }

    .pswp__counter,
    .pswp__preloader,
    .pswp__button--zoom {
      display: none !important;
    }

    // Even stronger override for adapted version
    .pswp__zoom-wrap {
      transform: none !important;
      animation: resetTransform 0s infinite;
    }

    .pswp__img {
      transform: none !important;
      animation: resetTransform 0s infinite;
    }

    .pswp__button--close {
      position: fixed !important;
      top: var(--bew-pswp-close-top, -100px) !important; // Hide by default
      left: var(--bew-pswp-close-left, -100px) !important; // Hide by default
      right: auto !important;
      bottom: auto !important;
      width: 44px !important;
      height: 44px !important;
      border-radius: 999px !important;
      background: rgba(0, 0, 0, 0.72) !important;
      backdrop-filter: blur(8px) !important;
      color: #fff !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.45) !important;
      pointer-events: auto !important;
      transition:
        background 0.2s ease,
        opacity 0.3s ease,
        transform 0.3s ease !important;
      z-index: 9999 !important;
      margin: 0 !important;
      padding: 0 !important;
      opacity: 0 !important; // Start hidden
      transform: scale(0.8) !important; // Start scaled down
    }

    // Show button when position is set and not hidden
    &:not([style*="--bew-pswp-button-hidden"]) .pswp__button--close {
      opacity: 1 !important;
      transform: scale(1) !important;
    }

    // Hide button when image is loading or position is unstable
    &[style*="--bew-pswp-button-hidden"] .pswp__button--close {
      opacity: 0 !important;
      transform: scale(0.8) !important;
      pointer-events: none !important;
    }

    .pswp__button--close:hover {
      background: rgba(0, 0, 0, 0.9) !important;
    }

    // Keep navigation arrows visible and style them
    .pswp__button--arrow--prev,
    .pswp__button--arrow--next {
      display: flex !important;
      width: 44px !important;
      height: 44px !important;
      border-radius: 999px !important;
      background: rgba(0, 0, 0, 0.72) !important;
      backdrop-filter: blur(8px) !important;
      color: #fff !important;
      align-items: center !important;
      justify-content: center !important;
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.45) !important;
      transition: background 0.2s ease !important;
      pointer-events: auto !important;
      position: fixed !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
      z-index: 9998 !important;
      margin: 0 !important;
    }

    .pswp__button--arrow--prev {
      left: 24px !important;
    }

    .pswp__button--arrow--next {
      right: 24px !important;
      transform: translateY(-50%) rotate(180deg) !important;
    }

    .pswp__button--arrow--prev:hover,
    .pswp__button--arrow--next:hover {
      background: rgba(0, 0, 0, 0.9) !important;
    }

    // Hide navigation arrows when they should be hidden (for single images)
    &[data-bewly-hide-nav="true"] {
      .pswp__button--arrow--prev,
      .pswp__button--arrow--next {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
      }
    }
  }
}
